/*
 jquery.jqDock.js v1.9
*/
(function(k,t){if(!k.jqDock){var s=["Top","Right","Bottom","Left"],L=["Major","Minor"],w=["mouseenter","mousemove","mouseleave"],u=["docknudge","dockidle","dockfreeze"],n=["Idler","Inactive","Indock","Overdock","Offdock"],C=['<div style="position:relative;padding:0;',"margin:0;border:0 none;background-color:transparent;",'">'],o={v:{wh:"height",xy:1,tl:"top",lead:0,trail:2,inv:"h"},h:{wh:"width",xy:0,tl:"left",lead:3,trail:1,inv:"v"}},l=[],D=[0,0],W=function(){},X=function(){return false},x=function(a){a=
parseInt(a,10);return isNaN(a)?0:a},r=function(a,c){for(var d=n[c]?c+1:n.length;c<d&&d--;)a[n[d]]&&(t.clearTimeout(a[n[d]]),a[n[d]]=null)},y=function(a){return(a=a&&a.id?a.id.match(/^jqDock(\d+)$/):0)?1*a[1]:-1},Y=function(){var a=l[y(k(".jqDockFilter",this).add(this).css({filter:""}).removeClass("jqDockFilter").filter(".jqDock")[0])];if(a)a.Asleep=false,a.Menu.trigger("dockshow",["ready"]).trigger(u[0])},E=function(a,c){for(var d=true,e=l.length,b;a&&d&&e--&&l[e].Elem;)for(b=l[e].Elem.length;d&&
b--;)d=l[e].Elem[b].Img[0]!==a;return d?!d:c?[e,b]:l[e].Elem[b]},F=function(a){var c=(new Date).getTime(),a=a?a.Stamp+a.Opts.duration:0;a>c&&(c-=a-c);return c},M=function(a){var c=l[a.data.id],d=c.Elem[a.data.idx];d.height=this.height;d.width=this.width;--c.Load<=0&&t.setTimeout(function(){k.jqDock.initDock(a.data.id)},0)},Z=function(a,c){for(var d;a&&a.ownerDocument&&a!==c;){if(d=a.className.toString().match(/jqDockMouse(\d+)/))return 1*d[1];a=a.parentNode}return-1},N=function(a,c,d){var e={},b=
o[d].wh,d=o[o[d].inv].wh;e[b]=c;e[d]=Math.round(c*a[d]/a[b]);return e},O=function(){k(this).prev("img").triggerHandler("click")},v=function(a,c){var d=a.Elem[a.Current];if(d&&a.Opts.labels)d.Label.el[c?"show":"hide"]()},P=function(a){var c=o[a.Opts.vh],d=a.Elem.length,e=-1,b,f,h,j,g=D[c.xy]-a.Elem[0].Wrap.parent().offset()[c.tl];if(g>=0)for(b=0;e<0&&b<d;b++)if(f=a.Elem[b],h=f.Pad[c.lead]+f.Pad[c.trail],j=f.Major+h,g<j){if(b!==a.Current)v(a),a.Current=b;e=f.Offset+g*(f.Initial+h)/j}else g-=j;return e},
Q=function(a){for(var c=a.childNodes.length,d;c;)d=a.childNodes[--c],d.childNodes&&d.childNodes.length?Q(d):d.nodeType===3&&a.removeChild(d)},R=function(a){a.Menu.css({visibility:"visible"}).show()},B=function(a){var c=a.Opts.idle;c&&(r(a,0),a[n[0]]=t.setTimeout(function(){a.Menu.trigger("dockidle")},c))},$=function(a,c,d){var e=a.Opts,b=e.labels,f=c.Label,h;f.el=k('<div class="jqDockLabel jqDockLabel'+c.Link+'" style="position:absolute;margin:0;"></div>').insertAfter(c.Img).hide().click(O);b&&(h=
b.charAt(0)==="b",b=b.charAt(1)==="r",f.el.css({top:h?"auto":0,left:b?"auto":0,bottom:h?0:"auto",right:b?0:"auto"}));a=e.setLabel.call(a.Menu[0],c.Title,d,f.el[0]);a!==false&&k('<div class="jqDockLabelText">'+a.toString()+"</div>").appendTo(f.el)},G=function(a,c){for(var d=l[a],e=d.Opts,b=o[e.vh].wh,f=d.Elem.length,h,j,g,c=c||c===0?c:P(d);f--;){h=d.Elem[f];g=h.Initial;if(c>=0&&(j=Math.abs(c-h.Centre),j<e.distance&&(g=h[b]-Math.round((h[b]-h.Initial)*Math.pow(j,e.coefficient)/e.attenuation)),f===d.Current))j=
[D[o[e.vh].xy],d.Current,g].join(","),j===d.ToFro[0]&&g!==d.ToFro[2]?g=d.ToFro[2]:d.ToFro=[d.ToFro[1],j,g];h.Final=g}},aa=function(a){return a},T=function(a,c,d,e){var a=l[a],b=a.Elem[c],f=a.Opts,h=a.Yard,j=o[f.vh],g=o[j.inv],p=b.src!==b.altsrc,q,i,m,n;if(e||b.Major!==d){q=k.boxModel||f.vh==="v"?0:a.Border[j.lead]+a.Border[j.trail];if(p&&!e&&b.Major===b.Initial)b.Img[0].src=b.altsrc;a.Spread+=d-b.Major;i=N(b,d,f.vh);m=f.size-i[g.wh];({top:1,left:1})[f.align]?i["margin"+s[g.trail]]=m:{middle:1,center:1}[f.align]?
(n=Math.round(m*(100-f.bias)/100),i["margin"+s[g.lead]]=m-n,i["margin"+s[g.trail]]=n):i["margin"+s[g.lead]]=m;if(d!==b.Major||e&&!c){if(f.flow)h.parent()[j.wh](a.Spread+a.Border[j.lead]+a.Border[j.trail]);h[j.wh](a.Spread+q)}b.Wrap.css(i);f.flow||h.css(j.tl,Math.floor(Math.max(0,(a[j.wh]-a.Spread)/2)));if(a.OnDock){var c=!a.Stamp,f=a.Opts.labels,h=o[a.Opts.vh],j=a.Elem[a.Current],z,S;if(j&&f){q=j.Label;m=q.el;if(q.mc)for(z in q.mc=0,o)for(S in q[z]=m[o[z].wh](),{lead:1,trail:1})q[z]+=x(m.css("padding"+
s[o[z][S]]));f.charAt(0)==="m"&&m.css({top:Math.floor((j[L[o[h.inv].xy]]-q.v)/2)});f.charAt(1)==="c"&&m.css({left:Math.floor((j[L[h.xy]]-q.h)/2)})}c&&v(a,1)}b.Major=d;b.Minor=i[g.wh];if(p&&!e&&d===b.Initial)b.Img[0].src=b.src}},H=function(a){var c=l[a],d=c.Opts,e=o[d.vh],b=d.duration+d.step,f,h;if(c.Stamp&&(b=F()-c.Stamp,b>=d.duration))c.Stamp=0;if(b>=d.step){h=(d.duration-b)/d.step;for(d=0;d<c.Elem.length;d++)b=c.Elem[d],f=(f=b.Final-b.Major)&&h>1?b.Major+Math[f<0?"floor":"ceil"](f/h):b.Final,T(a,
d,f);if(c.Spread>c[e.wh])c.Yard.parent()[e.wh](c.Spread+c.Border[e.lead]+c.Border[e.trail]),c[e.wh]=c.Spread}},I=function(a,c){var d=l[a],e=d.Elem,b=e.length;r(d,2);if(d.OnDock&&!d.Stamp){for(G(a,c);b&&e[b-1].Major===e[b-1].Final;)--b;b?(H(a),d[n[2]]=t.setTimeout(function(){I(a,c)},d.Opts.step)):v(d,1)}},U=function(a,c){var d=l[a],e=d.Elem,b=e.length;if(!d.OnDock){for(;b&&e[b-1].Major<=e[b-1].Initial;)--b;P(d);if(b)H(a),d[n[4]]=t.setTimeout(function(){U(a,c)},d.Opts.step);else{d.Stamp=0;for(b=e.length;b--;)e[b].Major=
e[b].Final=e[b].Initial;d.Current=-1;c||B(d)}}},V=function(a,c){var d=l[a],e=d.Elem,b=e.length;if(d.OnDock){for(G(a,c);b&&e[b-1].Major===e[b-1].Final;)--b;!b||!d.Stamp?(d.Stamp=0,I(a,c)):(H(a),d[n[3]]=t.setTimeout(function(){V(a,c)},d.Opts.step))}},A=function(a,c,d,e){var b=l[c],f=b.Elem,h=f.length;if(a===0)b.OnDock=1,b.Current>=0&&b.Current!==d&&v(b),b.Current=d,b.Stamp=e&&e>1?0:F(b),V(c,e?f[d].Centre:null);if(a===1){if(d!==b.Current)v(b),b.Current=d;I(c)}if(a===2){r(b,1);b.OnDock=0;v(b);for(b.Stamp=
F(b);h--;)f[h].Final=f[h].Initial;U(c,!!e)}},J=function(a){var c=y(this),d=l[c],e=d?Z(a.target,this):-1,b=-1,f;if(d)if(d.Asleep){if(!d.Opts.noBuffer)d.Sleeper={target:a.target,type:a.type,pageX:a.pageX,pageY:a.pageY}}else f=d.OnDock,r(d,0),D=[a.pageX,a.pageY],a.type===w[2]?f?b=2:B(d):(d.Opts.inactivity&&(r(d,1),d[n[1]]=t.setTimeout(function(){A(2,c,e,1)},d.Opts.inactivity)),a.type===w[1]?e<0?f&&d.Current>=0&&(b=2):b=!f||d.Current<0?0:1:e>=0&&!f&&(b=0)),d.Sleeper=null,b>=0&&A(b,c,e)},K=function(a){var c=
k(".jqDock",this).get(0),d=y(c),e=l[d],b=a.type===u[2],f=b?"freeze":"sleep";if(e)if(a.type===u[0]){f=e.Frozen?"thaw":"wake";if(e.Asleep&&(e.Asleep=e.Opts.onWake.call(this,f)===false,!e.Asleep))e.Frozen=!k(this).trigger("dockwake",[f]);e.Asleep||(B(e),e.Sleeper&&J.call(c,e.Sleeper))}else if(r(e,0),a=!e.Asleep||b&&!e.Frozen,!a||e.Opts.onSleep.call(e.Menu[0],f)!==false)e.Asleep=!r(e,b?-1:1),e.Frozen=e.Frozen||b,a&&e.Menu.trigger("docksleep",[f]),b?e.Stamp=e.OnDock=0:A(2,d,0,1)};k.jqdock=k.jqDock=function(){return{version:1.9,
defaults:{size:48,distance:72,coefficient:1.5,duration:300,align:"bottom",labels:0,source:0,loader:0,inactivity:0,fadeIn:0,fadeLayer:"",step:50,setLabel:0,flow:0,idle:0,onReady:0,onSleep:0,onWake:0,noBuffer:0,active:-1,bias:50},useJqLoader:k.browser.opera||k.browser.safari,initDock:function(a){var c=l[a],d=c.Opts,e=o[d.vh],b=o[e.inv],f=c.Border,h=c.Elem.length,j=C.join(""),g=0,p=0,q,i,m,n=d.fadeLayer;Q(c.Menu[0]);for(c.Menu.children().each(function(a,b){var e=c.Elem[a].Wrap=k(b).wrap(j+j+"</div></div>").parent();
d.vh==="h"&&e.parent().css("float","left")}).find("img").andSelf().css({position:"relative",padding:0,margin:0,borderWidth:0,borderStyle:"none",verticalAlign:"top",display:"block",width:"100%",height:"100%"});p<h;)i=c.Elem[p++],m=N(i,d.size,e.inv),i.Major=i.Final=i.Initial=m[e.wh],i.Wrap.css(m),i.Img.attr({alt:""}).parent("a").andSelf().removeAttr("title"),c[b.wh]=Math.max(c[b.wh],d.size+i.Pad[b.lead]+i.Pad[b.trail]),i.Offset=g,i.Centre=g+i.Pad[e.lead]+i.Initial/2,g+=i.Initial+i.Pad[e.lead]+i.Pad[e.trail];
for(p=0;p<h;)for(q in i=c.Elem[p++],m=i.Pad[e.lead]+i.Pad[e.trail],c.Spread+=i.Initial+m,{Centre:1,Offset:1}){G(a,i[q]);g=0;for(b=h;b--;)g+=c.Elem[b].Final+m;g>c[e.wh]&&(c[e.wh]=g)}for(;p;)i=c.Elem[--p],i.Final=i.Initial;e=[C[0],C[2],'<div id="jqDock',a,'" class="jqDock" style="position:absolute;top:0;left:0;padding:0;margin:0;overflow:visible;height:',c.height,"px;width:",c.width,'px;"></div></div>'].join("");c.Yard=k("div.jqDock",c.Menu.wrapInner(e));for(b=4;b--;)f[b]=x(c.Yard.css("border"+s[b]+
"Width"));for(c.Yard.parent().addClass("jqDockWrap").width(c.width+f[1]+f[3]).height(c.height+f[0]+f[2]);p<h;){i=c.Elem[p];m=i.Wrap.parent();for(b=4;b--;)i.Pad[b]&&m.css("padding"+s[b],i.Pad[b]);T(a,p,i.Final,true);m.add(i.Img).addClass("jqDockMouse"+p);$(c,i,p++)}i=c.Menu.bind(u.join(" "),K);c.Yard.bind(w.join(" "),J).find("*").css({filter:"inherit"});c.Elem[d.active]&&A(0,a,d.active,2);c.Asleep=d.onReady.call(c.Menu[0],"ready")===false;if(!c.Asleep)if(n){if(n!=="menu")i=c.Yard,n==="wrap"&&(i=i.parent());
c.Asleep=!!k(".jqDock,.jqDockWrap",i).addClass("jqDockFilter").css({filter:"inherit"});i.css({opacity:0});R(c);i.animate({opacity:1},d.fadeIn,Y)}else R(c),c.Menu.trigger("dockshow",["ready"]),B(c)}}}();k.fn.jqdock=k.fn.jqDock=function(a){if(a==="nudge"||a==="idle"||a==="freeze")this.filter(".jqDocked").each(function(){K.call(this,{type:"dock"+a})});else if(a==="destroy")this.filter(".jqDocked").each(function(){var a=y(k(".jqDock",k(this).removeClass("jqDocked")).get(0)),c=l[a],b=w.length,f,h,j;if(c){for(r(c,
-1);b--;)c.Yard.unbind(w[b],J);for(b=u.length;b--;)c.Menu.unbind(u[b],K);for(b=0;b<c.Elem.length;b++)for(f in h=c.Elem[b],j=h.Img,h.Label.el.unbind("click",O).remove(),j.attr(h.Orig.i).removeClass("jqDockMouse"+b),h.Orig.i.style||j.removeAttr("style"),h.Link==="Link"&&(j.parent().attr(h.Orig.a),h.Orig.a.style||j.parent().removeAttr("style")),c.Menu.append(h.Wrap.children()),h.Label.el=h.Orig.i=h.Orig.a=null,h)h[f]=null;k(".jqDockWrap",c.Menu).remove();for(b in c)c[b]=null;l[a]=null}for(a=l.length;a&&
l[a-1]===null;)--a;a||(l=[])});else if(a==="active"||a==="expand")this.each(function(){var c=E(this,1),e=c?l[c[0]]:0;if(e){r(e,-1);if(!e.Frozen)e.Frozen=e.Asleep=!!e.Menu.trigger("docksleep",["freeze"]);A(0,c[0],c[1],a==="active"?2:1)}});else if(a==="get"){var c=this.filter(".jqDocked");return(c=c.length?l[y(k(".jqDock",c).get(0))]:E(this.get(0)))?k.extend(true,{},c):null}else this.length&&!this.not("img").length?this.each(function(c,e){var b=E(e),f=0,h,j,g;a=a||{};if(b){h=b.Major===b.Initial;for(g in{src:1,
altsrc:1})a[g]&&(j=(k.isFunction(a[g])?a[g].call(e,b[g],g):a[g]).toString(),b[g]!==j&&(b[g]=j,f=(g==="src"?h:!h)?g:f));f&&k(e).attr("src",b[f])}}):this.not(".jqDocked").filter(function(){return!k(this).parents(".jqDocked").length&&!k(this).children().not("img").filter(function(){return k(this).filter("a").children("img").parent().children().length!==1}).length}).addClass("jqDocked").each(function(){var c=k(this),e=l.length,b,f,h,j,g;l[e]={Elem:[],Menu:c,OnDock:0,Stamp:0,width:0,height:0,Spread:0,
Border:[],Opts:k.extend({},k.jqDock.defaults,a||{},k.metadata?c.metadata():{},c.data("jqdock")),Current:-1,Load:0,ToFro:["","",0]};b=l[e];f=b.Opts;h=!f.loader&&k.jqDock.useJqLoader||f.loader==="jquery";for(g in{size:1,distance:1,duration:1,inactivity:1,fadeIn:1,step:1,idle:1,active:1})f[g]=x(f[g]);g=1*f.coefficient;f.coefficient=isNaN(g)?1.5:g;if({middle:1,center:1}[f.align]){g=x(f.bias);if(g<1)f.align=f.align==="middle"?"top":"left";if(g>99)f.align=f.align==="middle"?"bottom":"right";f.bias=g}if(!/^[tmb][lcr]$/.test(f.labels.toString()))f.labels=
f.labels?{top:"br",left:"tr"}[f.align]||"tl":"";if(!f.setLabel)f.setLabel=aa;f.fadeLayer=f.fadeIn?{dock:1,wrap:1}[f.fadeLayer]?f.fadeLayer:"menu":"";for(g in{onSleep:1,onWake:1,onReady:1})f[g]||(f[g]=f[g]===false?X:W);j=/^m|c$/.test(f.labels);f.attenuation=Math.pow(f.distance,f.coefficient);f.vh={left:1,center:1,right:1}[f.align]?"v":"h";k("img",c).each(function(a,c){var d=k(c),e=d.parent("a"),h=e.attr("title")||"",g={},l;for(l in{src:1,alt:1,title:1,style:1})g[l]=d.attr(l)||"";++b.Load;b.Elem[a]=
{Img:d,src:g.src,altsrc:(f.source?f.source.call(c,a):"")||(/\.(gif|jpg|jpeg|png)$/i.test(g.alt||"")?g.alt:"")||g.src,Title:g.title||h||"",Orig:{i:k.extend({},g),a:{title:h,style:e.attr("style")||""}},Label:{mc:j},Pad:[],Link:e.length?"Link":"Image"};for(l=4;l--;)b.Elem[a].Pad[l]=x(d.css("padding"+s[l]))});k.each(b.Elem,function(a,c){var b,d=c.altsrc;h?k("<img>").bind("load",{id:e,idx:a},M).attr({src:d}):(b=new Image,b.onload=function(){M.call(this,{data:{id:e,idx:a}});b.onload="";b=null},b.src=d)})});
return this}}})(jQuery,window);