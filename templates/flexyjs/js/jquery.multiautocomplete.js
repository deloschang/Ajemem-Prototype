/* File generated by shrinker.ch - DateTime: 2012-06-17, 13:25:22 */
jQuery(function(g){g.fn.autocomplete=function(K){return this.each(function(){function s(d,a,b,j,m){if(!B())return false;var h=document.createElement("li"),v=document.createTextNode(d),r=document.createElement("a");j="bit-box"+(j?" locked":"");g(h).attr({"class":j,rel:a});g(h).prepend(v);g(r).attr({"class":"closebutton",href:"#"});h.appendChild(r);n.append(h);g(r).click(function(){C(g(this).parent("li"));return false});if(!b){g("#"+w+"_annoninput").remove();D(m);if(k.children("option[value="+a+"]").length){b=
k.children("option[value="+a+"]");b.get(0).setAttribute("selected","selected");b.hasClass("selected")||b.addClass("selected")}else{b=g(document.createElement("option"));b.attr("value",a).get(0).setAttribute("selected","selected");b.attr("value",a).addClass("selected");b.text(d);k.append(b)}f.onselect.length&&E(f.onselect,b);k.change()}n.children("li.bit-box.deleted").removeClass("deleted");c.hide();p&&q.hide()}function C(d){if(!d.hasClass("locked")){d.fadeOut("fast");if(f.onremove.length){var a=k.children("option[value="+
d.attr("rel")+"]");E(f.onremove,a)}k.children('option[value="'+d.attr("rel")+'"]').removeAttr("selected").removeClass("selected");d.remove();k.change();y=0}}function D(d){var a=g(document.createElement("li")),b=g(document.createElement("input")),j=0;a.attr({"class":"bit-input",id:w+"_annoninput"});b.attr({type:"text","class":"maininput",size:"1"});n.append(a.append(b));b.focus(function(){l.fadeIn("fast")});b.blur(function(){l.fadeOut("fast")});n.click(function(){b.focus();if(c.length&&b.val().length)c.show();
else{c.hide();p&&q.hide();l.children(".default").show()}});b.keypress(function(m){if(m.keyCode==13||m.keyCode==9)return false;b.attr("size",b.val().length+1)});b.keydown(function(m){if(m.keyCode==191){m.preventDefault();return false}});b.keyup(function(m){var h=F(b.val());if(m.keyCode==8&&h.length==0){c.hide();p&&q.hide();if(!n.children("li.bit-box:last").hasClass("locked"))if(n.children("li.bit-box.deleted").length==0){n.children("li.bit-box:last").addClass("deleted");return false}else{if(y)return;
y=1;n.children("li.bit-box.deleted").fadeOut("fast",function(){C(g(this));return false})}}if(m.keyCode!=40&&m.keyCode!=38&&h.length!=0){x=0;if(f.json_url)if(f.cache&&G){z(h);A()}else{j++;var v=j;setTimeout(function(){G=true;if(v==j)g.getJSON(f.json_url+(f.json_url.indexOf("?")>-1?"&":"?")+"tag="+h,null,function(r){z(h,r);A()})},f.delay)}else{z(h);A()}l.children(".default").hide();c.show()}});if(g("ul.holder").find("li.bit-box").length>0)d=1;d&&setTimeout(function(){b.focus();l.children(".default").show()},
1)}function z(d,a){c.html("");if(!f.cache&&a!=null){o=[];t=""}L(d);a!=null&&a.length&&g.each(a,function(r,u){if(u.name!=undefined){o.push({name:u.name,value:u.value,pf_img:u.pf_img});t+=""+(o.length-1)+":"+u.name+";"}});var b=f.maxshownitems<o.length?f.maxshownitems:o.length,j="i";if(f.filter_case)j="";var m,h;try{m=eval("/(?:^|;)\\s*(\\d+)\\s*:[^;]*?"+d+"[^;]*/g"+j);h=m.exec(t)}catch(v){}for(j="";h!=null&&b>0;){h=o[h[1]];if(!(f.filter_selected&&k.children("option[value="+h.value+"]").hasClass("selected"))){j+=
'<li rel="'+h.value+'">'+h.pf_img+M(h.name,d)+"</li>";x++;b--}h=m.exec(t)}c.append(j);if(f.firstselected){e=c.children("li:visible:first");e.addClass("auto-focus")}if(x>f.height){c.css({height:f.height*45+"px",overflow:"auto"});p&&q.css({height:f.height*45+"px",width:c.width()+"px"}).show()}else{c.css("height","auto");p&&q.css({height:c.height()+"px",width:c.width()+"px"}).show()}}function M(d,a){if(f.filter_case)try{eval("var text = text.replace(/(.*)("+a+")(.*)/gi,'$1<em>$2</em>$3');")}catch(b){}else try{eval("var text = text.replace(/(.*)("+
a.toLowerCase()+")(.*)/gi,'$1<em>$2</em>$3');")}catch(j){}return d}function H(){c.children("li").mouseover(function(){c.children("li").removeClass("auto-focus");g(this).addClass("auto-focus");e=g(this)});c.children("li").mouseout(function(){g(this).removeClass("auto-focus");e=null})}function I(){c.children("li").unbind("mouseover");c.children("li").unbind("mouseout");c.mousemove(function(){H();c.unbind("mousemove")})}function A(){var d=g("#"+w+"_annoninput").children(".maininput");H();c.children("li").unbind("mousedown");
c.children("li").mousedown(function(){var a=g(this);s(a.text(),a.attr("rel"));c.hide();p&&q.hide();l.hide()});d.unbind("keydown");d.keydown(function(a){if(a.keyCode==191){a.preventDefault();return false}a.keyCode!=8&&n.children("li.bit-box.deleted").removeClass("deleted");if((a.keyCode==13||a.keyCode==9)&&J()){var b=e;s(b.text(),b.attr("rel"));l.hide();a.preventDefault();e=null;return false}if((a.keyCode==13||a.keyCode==9)&&!J()){if(f.newel){b=F(g(this).val());s(b,b);l.hide();a.preventDefault();e=
null}return false}if(a.keyCode==40){I();if(e==null||e.length==0){e=c.children("li:visible:first");c.get(0).scrollTop=0}else{e.removeClass("auto-focus");e=e.nextAll("li:visible:first");b=parseInt(e.prevAll("li:visible").length,10);var j=parseInt(e.nextAll("li:visible").length,10);if((b>Math.round(f.height/2)||j<=Math.round(f.height/2))&&typeof e.get(0)!="undefined")c.get(0).scrollTop=parseInt(e.get(0).scrollHeight,10)*(b-Math.round(f.height/2))}c.children("li").removeClass("auto-focus");e.addClass("auto-focus")}if(a.keyCode==
38){I();if(e==null||e.length==0){e=c.children("li:visible:last");c.get(0).scrollTop=parseInt(e.get(0).scrollHeight,10)*(parseInt(c.children("li:visible").length,10)-Math.round(f.height/2))}else{e.removeClass("auto-focus");e=e.prevAll("li:visible:first");b=parseInt(e.prevAll("li:visible").length,10);j=parseInt(e.nextAll("li:visible").length,10);if((j>Math.round(f.height/2)||b<=Math.round(f.height/2))&&typeof e.get(0)!="undefined")c.get(0).scrollTop=parseInt(e.get(0).scrollHeight,10)*(b-Math.round(f.height/
2))}c.children("li").removeClass("auto-focus");e.addClass("auto-focus")}})}function B(){if(f.maxitems!=0)return n.children("li.bit-box").length<f.maxitems?true:false}function L(d){if(f.newel&&B()){c.children("li[fckb=1]").remove();if(d.length!=0){var a=g(document.createElement("li"));a.attr({rel:d,fckb:"1"}).html(d);c.prepend(a);x++}}}function E(d,a){var b="";for(i=0;i<a.get(0).attributes.length;i++)if(a.get(0).attributes[i].nodeValue!=null)b+='"_'+a.get(0).attributes[i].nodeName+'": "'+a.get(0).attributes[i].nodeValue+
'",';d.call(d,"{"+b+" notinuse: 0}")}function J(){if(e==null)return false;if(e.length==0)return false;return true}function F(d){d=d.replace(/[\"\'][\s]*javascript:(.*)[\"\']/g,'""');d=d.replace(/script(.*)/g,"");d=d.replace(/eval\((.*)\)/g,"");return d.replace("/([\u0000-\u0008,\u000b-\u000c,\u000e-\u0019])/","")}g(this).bind("addItem",function(d,a){s(a.title,a.value,0,0,0)});var f=g.extend({json_url:null,cache:true,height:"10",newel:false,firstselected:false,filter_case:false,filter_selected:true,
filter_hide:true,complete_text:"Start typing...",maxshownitems:30,maxitems:10,onselect:"",onremove:"",delay:10},K),n=null,c=null,l=null,x=0,o=[],G=false,t="",e=null,y=0,p=false,q,k=g(this),w=k.attr("id");k.hide();k.attr("multiple","multiple");k.attr("name").indexOf("[]")==-1&&k.attr("name",k.attr("name")+"[]");n=g(document.createElement("ul"));n.attr("class","holder");k.after(n);l=g(document.createElement("div"));l.addClass("facebook-auto");l.append('<div class="default">'+f.complete_text+"</div>");
if(p){l.append('<iframe class="ie6fix" scrolling="no" frameborder="0"></iframe>');q=l.children(".ie6fix")}c=g(document.createElement("ul"));c.attr("id",w+"_feed");l.prepend(c);n.after(l);c.css("width",l.width());(function(){k.children("option").each(function(d,a){a=g(a);if(a.hasClass("selected")||a.is(":selected")){s(a.text(),a.val(),true,a.hasClass("locked"));a.attr("selected","selected")}else a.removeAttr("selected");o.push({name:a.text(),value:a.val()});t+=""+(o.length-1)+":"+a.text()+";"})})();
D(0);return this})}});
